<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Provider Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Provider Dashboard</h1>

        <h2>Work Requests</h2>
        <ul id="workRequests"></ul>

        <h2>Upload Work</h2>
        <form id="uploadForm">
            <label for="providerName">Your Name:</label>
            <input type="text" id="providerName" required>

            <label for="pdfFile">Upload PDF:</label>
            <input type="file" id="pdfFile" accept=".pdf" required>

            <button type="submit">Upload</button>
        </form>

        <h2>Your Star Rating</h2>
        <p>Name: <span id="providerDisplayName">Provider</span> <span id="helperTag"></span></p>
        <p>Stars: <span id="starRating">0</span></p>
    </div>
    <script>
        let tasksCompleted = 0;

        // Use a simple in-memory approach to track tasks (no localStorage)
        let userRequests = [
            { name: "John Doe", subject: "Math", chapters: "Chapter 1", status: "Pending", providerName: null, pdfLink: null },
            { name: "Jane Doe", subject: "Science", chapters: "Chapter 2", status: "Pending", providerName: null, pdfLink: null },
        ];

        // Display user requests
        function displayRequests() {
            const requestList = document.getElementById("workRequests");
            requestList.innerHTML = "";
            userRequests.forEach((request, index) => {
                if (request.status === "Pending") {
                    const listItem = document.createElement("li");
                    listItem.innerHTML = `
                        <strong>Request by:</strong> ${request.name} <br>
                        <strong>Subject:</strong> ${request.subject} <br>
                        <strong>Chapters:</strong> ${request.chapters} <br>
                        <button onclick="completeRequest(${index})">Complete Request</button>
                    `;
                    requestList.appendChild(listItem);
                }
            });
        }

        // Complete request and upload PDF
        function completeRequest(index) {
            const providerName = document.getElementById("providerName").value;
            const pdfFile = document.getElementById("pdfFile").files[0];

            if (!pdfFile || !providerName) {
                alert("Please enter your name and upload a PDF.");
                return;
            }

            // Simulate uploading PDF (no actual file storage on GitHub Pages)
            const pdfLink = URL.createObjectURL(pdfFile);

            // Mark request as completed
            userRequests[index].status = "Completed";
            userRequests[index].providerName = providerName;
            userRequests[index].pdfLink = pdfLink;

            // Increment tasks completed and update stars
            tasksCompleted += 1;
            updateStars();

            alert("Request completed successfully!");
            displayRequests();
        }

        // Update stars based on completed tasks
        function updateStars() {
            const stars = Math.floor(tasksCompleted / 1); // 1 star per unique upload
            document.getElementById("starRating").innerText = stars;

            if (stars >= 10) {
                document.getElementById("helperTag").innerText = " (Best Helper)";
            }
        }

        displayRequests(); // Load requests on page load
    </script>
</body>
</html>

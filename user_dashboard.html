<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Provider Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Provider Dashboard</h1>

        <h2>Work Requests</h2>
        <ul id="workRequests"></ul>

        <h2>Your Star Rating</h2>
        <p>Name: <span id="providerName">Provider</span> <span id="helperTag"></span></p>
        <p>Stars: <span id="starRating">0</span></p>
    </div>
    <script>
        let tasksCompleted = 0;

        // Load user requests
        function displayRequests() {
            const userRequests = JSON.parse(localStorage.getItem("userRequests")) || [];
            const requestList = document.getElementById("workRequests");
            requestList.innerHTML = "";

            userRequests.forEach((request, index) => {
                if (request.status === "Pending") {
                    const listItem = document.createElement("li");
                    listItem.innerHTML = `
                        <strong>${request.name}:</strong> ${request.subject} (${request.chapters})
                        <button onclick="markAsCompleted(${index})">Complete Request</button>
                    `;
                    requestList.appendChild(listItem);
                }
            });
        }

        // Mark request as completed
        function markAsCompleted(index) {
            const userRequests = JSON.parse(localStorage.getItem("userRequests")) || [];
            const request = userRequests[index];

            if (!request) {
                alert("Invalid request.");
                return;
            }

            const pdfLink = prompt("Provide the link to the completed PDF (or upload it to a cloud service first):");
            if (!pdfLink) {
                alert("No PDF link provided. Cannot mark as completed.");
                return;
            }

            // Update request status
            request.status = "Completed";
            request.providerName = "Provider"; // Replace with actual provider's name
            request.pdfLink = pdfLink;
            localStorage.setItem("userRequests", JSON.stringify(userRequests));

            // Increment tasks completed and update stars
            tasksCompleted += 1;
            updateStars();

            alert("Work request marked as completed!");
            displayRequests();
        }

        // Update stars and helper tag
        function updateStars() {
            const stars = Math.floor(tasksCompleted / 1); // 1 star per unique request
            document.getElementById("starRating").innerText = stars;

            if (stars >= 10) {
                document.getElementById("helperTag").innerText = " (Best Helper)";
            }
        }

        displayRequests(); // Load requests on page load
    </script>
</body>
</html>
